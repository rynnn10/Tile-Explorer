<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover"
    />
    <meta name="theme-color" content="#3b82f6" />
    <title>Tile Explorer - Riyan Edition Ultimate</title>
    <link rel="manifest" href="manifest.json" />
    <link rel="icon" href="assets/iconapk.jpg" type="image/png" />
    <link rel="shortcut icon" href="assets/iconapk.jpg" type="image/png" />

    <script src="https://cdn.tailwindcss.com"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="style.css" />
  </head>
  <body
    id="game-body"
    class="theme-ocean h-screen w-screen fixed text-slate-800 overflow-hidden"
  >
    >
    <audio id="bgm-audio" loop preload="auto">
      <source src="sfx/bc.mp3" type="audio/mpeg" />
    </audio>
    <div
      id="start-screen"
      class="absolute inset-0 z-[200] flex flex-col items-center justify-end p-4 pt-20 transition-transform duration-500 overflow-y-auto bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900"
    >
      <div class="mb-4 relative animate-float mt-4 md:mt-0">
        <div
          class="absolute -top-8 -left-8 text-yellow-300 opacity-50 transform -rotate-12"
        >
          <svg width="50" height="50" viewBox="0 0 24 24" fill="currentColor">
            <path
              d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-5.82 3.25L7.38 14.14 2 9.27l6.91-1.01L12 2z"
            />
          </svg>
        </div>
        <div
          class="bg-white/10 backdrop-blur-md border-2 border-white/30 p-6 rounded-[2rem] shadow-2xl text-center relative overflow-hidden"
        >
          <h1
            class="text-4xl md:text-5xl font-black text-white drop-shadow-md tracking-tight leading-tight"
          >
            TILE<br /><span class="text-yellow-300">EXPLORER</span>
          </h1>
        </div>
      </div>

      <div class="mb-4 w-full max-w-xs grid grid-cols-2 gap-2">
        <div
          class="bg-white/20 backdrop-blur-sm rounded-xl p-3 border border-white/30 shadow-lg flex flex-col justify-between"
        >
          <p class="text-[10px] font-bold uppercase text-white/80">
            Skor Tertinggi
          </p>
          <p id="high-score-display" class="text-xl font-black text-white">0</p>
        </div>
        <div
          class="bg-white/20 backdrop-blur-sm rounded-xl p-3 border border-white/30 shadow-lg flex flex-col justify-between"
        >
          <p class="text-[10px] font-bold uppercase text-white/80">
            Waktu Terbaik
          </p>
          <p id="best-time-display" class="text-xl font-black text-yellow-300">
            --:--
          </p>
        </div>
      </div>

      <div class="w-full max-w-xs space-y-2 pb-4">
        <button
          id="btn-continue"
          onclick="continueGame()"
          class="hidden w-full group relative px-6 py-3 bg-green-500 rounded-2xl shadow-lg hover:bg-green-600 hover:-translate-y-1 transition-all duration-300"
        >
          <div class="flex items-center justify-center gap-3 text-white">
            <span class="text-lg font-bold">LANJUTKAN</span>
          </div>
        </button>

        <button
          onclick="confirmNewGame()"
          class="w-full group relative px-6 py-3 bg-white rounded-2xl shadow-lg hover:shadow-xl hover:-translate-y-1 transition-all duration-300"
        >
          <div class="flex items-center justify-center gap-3">
            <div class="bg-blue-500 text-white p-1 rounded-full">
              <svg
                width="18"
                height="18"
                viewBox="0 0 24 24"
                fill="currentColor"
              >
                <path d="M8 5v14l11-7z" />
              </svg>
            </div>
            <span
              class="text-lg font-bold text-slate-700 group-hover:text-blue-600 transition-colors"
              >MULAI PERMAINAN</span
            >
          </div>
        </button>

        <div class="grid grid-cols-2 gap-2">
          <button
            onclick="showLevelSelect()"
            class="w-full px-4 py-3 bg-indigo-500 rounded-2xl shadow-lg text-white font-bold flex items-center justify-center gap-1 text-sm"
          >
            <span>ğŸ”¢</span> Pilih Level
          </button>
          <button
            onclick="showInfoModal()"
            class="w-full px-4 py-3 bg-white/20 border border-white/40 rounded-2xl text-white font-bold flex items-center justify-center gap-1 text-sm"
          >
            <span>â„¹ï¸</span> Info
          </button>
        </div>

        <button
          onclick="exitApp()"
          class="w-full px-6 py-3 bg-red-500/80 border border-red-400 rounded-2xl hover:bg-red-600 transition text-white font-bold flex items-center justify-center gap-2 text-sm"
        >
          Keluar Aplikasi
        </button>
      </div>

      <p class="mt-auto mb-2 text-white/50 text-[10px] font-medium text-center">
        Versi 1.0 - Riyan 2025 <br />
        <span class="opacity-70">IP: <span id="ip-display">...</span></span>
      </p>
    </div>

    <div
      id="game-header"
      class="absolute top-0 w-full z-40 pointer-events-none h-16 transition-all duration-300"
    >
      <div
        class="flex justify-between items-center p-2 bg-white/80 backdrop-blur-md shadow-sm border-b border-white/50"
      >
        <div class="pointer-events-auto flex flex-col gap-1">
          <div
            class="bg-white shadow-sm rounded-lg px-2 py-1 flex items-center gap-2 border border-slate-100"
          >
            <div class="text-orange-500 text-xs">ğŸ†</div>
            <p
              id="score-display"
              class="font-bold text-sm text-slate-700 leading-none"
            >
              0
            </p>
          </div>
          <div
            class="bg-slate-800 shadow-sm rounded-lg px-2 py-1 flex items-center gap-2 border border-slate-600"
          >
            <div class="text-blue-300 text-xs">â±ï¸</div>
            <p
              id="timer-display"
              class="font-bold text-sm text-white leading-none font-mono"
            >
              00:00
            </p>
          </div>
        </div>

        <div class="pointer-events-auto flex items-center gap-1">
          <div
            id="level-display"
            class="bg-blue-600 text-white px-3 py-1 rounded-full font-bold shadow-md text-xs border-2 border-blue-400"
          >
            Lv.1
          </div>

          <button
            onclick="checkHintAvailability()"
            id="btn-hint"
            class="relative p-1.5 bg-purple-100 rounded-full hover:bg-purple-200 transition shadow-sm text-purple-600 border border-purple-300"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="18"
              height="18"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <path d="m19 2 2 2-2 2-2-2 2-2Z" />
              <path d="m5 2 2 2-2 2-2-2 2-2Z" />
              <path
                d="M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z"
              />
              <path
                d="m12 15-3-3a22 22 0 0 1 2-2 9.5 9.5 0 0 1 2.13-2.13c.79-.79 2.07-.79 2.91 0a2.18 2.18 0 0 1 .09 2.91c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z"
              />
              <path d="m12 15 3 3" />
            </svg>
            <span
              id="hint-count"
              class="absolute -top-1 -right-1 bg-red-500 text-white text-[8px] font-bold w-3.5 h-3.5 rounded-full flex items-center justify-center border border-white"
              >3</span
            >
          </button>

          <button
            onclick="showSettingsModal()"
            class="p-1.5 bg-slate-200 rounded-full hover:bg-slate-300 transition shadow-sm text-slate-600"
          >
            âš™ï¸
          </button>
        </div>
      </div>
    </div>

    <div
      id="dev-controls"
      class="fixed top-1/2 left-0 w-full px-4 transform -translate-y-1/2 z-[100] flex justify-between pointer-events-none hidden"
    >
      <button
        onclick="devPrevLevel()"
        class="pointer-events-auto w-12 h-12 bg-black/50 hover:bg-black/70 text-white rounded-full backdrop-blur-md border-2 border-green-400 flex items-center justify-center shadow-lg transition active:scale-95"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="3"
          stroke-linecap="round"
          stroke-linejoin="round"
        >
          <path d="M15 18l-6-6 6-6" />
        </svg>
      </button>

      <button
        onclick="devNextLevel()"
        class="pointer-events-auto w-12 h-12 bg-black/50 hover:bg-black/70 text-white rounded-full backdrop-blur-md border-2 border-green-400 flex items-center justify-center shadow-lg transition active:scale-95"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="3"
          stroke-linecap="round"
          stroke-linejoin="round"
        >
          <path d="M9 18l6-6-6-6" />
        </svg>
      </button>
    </div>

    <div
      id="hint-confirm-modal"
      class="absolute inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-[260] hidden opacity-0 transition-opacity duration-300"
    >
      <div
        class="bg-white p-6 rounded-3xl shadow-2xl modal-box max-w-xs text-center transform scale-100 transition-transform border-4 border-purple-100"
      >
        <div
          class="w-14 h-14 bg-purple-100 text-purple-600 rounded-full flex items-center justify-center mx-auto mb-3 text-2xl"
        >
          âœ¨
        </div>
        <h2 class="text-lg font-black text-slate-800 mb-2">Gunakan Bantuan?</h2>
        <p class="text-slate-600 text-xs mb-4">
          Bantuan akan otomatis mencocokkan 3 ubin.<br />
          <span class="font-bold text-red-500 block mt-2">Biaya: 500 Poin</span>
        </p>
        <div class="grid grid-cols-2 gap-2">
          <button
            onclick="closeHintModal()"
            class="py-2 rounded-xl font-bold text-slate-600 bg-slate-100 hover:bg-slate-200 text-sm"
          >
            Batal
          </button>
          <button
            onclick="confirmUseHint()"
            class="py-2 rounded-xl font-bold text-white bg-purple-600 hover:bg-purple-700 shadow-lg text-sm"
          >
            Gunakan
          </button>
        </div>
      </div>
    </div>

    <div
      id="tray-container-wrapper"
      class="absolute top-20 left-0 w-full flex justify-center z-30 pointer-events-none transition-all duration-300 px-4 md:px-0"
    >
      <div
        id="tray-scaler"
        class="pointer-events-auto transition-transform duration-300 ease-out origin-top max-w-full md:max-w-[95vw]"
        style="box-sizing: border-box"
      >
        <div
          class="bg-slate-800/90 backdrop-blur-xl py-3 px-6 rounded-2xl shadow-xl border-2 border-white/20 relative mx-auto box-border min-w-fit"
        >
          <div
            id="tray-content"
            class="flex justify-center items-center gap-2"
          ></div>
          <div class="absolute -bottom-3 left-1/2 transform -translate-x-1/2">
            <div
              class="bg-red-500 text-white text-[10px] font-bold px-3 py-0.5 rounded-full shadow-md border border-red-400"
            >
              <span id="tray-count">0</span>/7
            </div>
          </div>
        </div>
      </div>
    </div>

    <div
      class="absolute inset-0 flex items-center justify-center pointer-events-none"
    >
      <div
        id="board-container"
        class="relative transition-transform duration-300 ease-out will-change-transform pointer-events-auto"
        style="width: 0; height: 0"
      ></div>
    </div>

    <div
      id="game-footer"
      class="absolute bottom-0 w-full bg-white/50 backdrop-blur-md border-t border-white/40 p-2 text-center z-50 h-[40px] flex items-center justify-center transition-all duration-300"
    >
      <p class="text-slate-600 text-xs font-semibold tracking-wide">
        Â© Copyright <span class="text-blue-600">Riyan</span> 2025
      </p>
    </div>

    <div
      id="settings-modal"
      class="absolute inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-[210] hidden opacity-0 transition-opacity duration-300"
    >
      <div
        class="bg-white p-6 rounded-3xl shadow-2xl modal-box transform scale-100 transition-transform"
      >
        <h2
          class="text-2xl font-black text-slate-800 mb-4 text-center border-b pb-2"
        >
          PENGATURAN
        </h2>

        <div class="space-y-4">
          <div class="bg-slate-50 p-4 rounded-2xl border border-slate-200">
            <h3
              class="text-sm font-bold text-slate-500 mb-4 uppercase tracking-wider flex items-center gap-2"
            >
              <span>ğŸ”Š</span> Pengaturan Suara
            </h3>

            <div class="mb-5">
              <div class="flex justify-between items-center mb-2">
                <span class="text-xs font-bold text-slate-600"
                  >Musik (BGM)</span
                >
                <span id="bgm-val" class="text-xs font-bold text-blue-500"
                  >50%</span
                >
              </div>
              <div class="flex items-center gap-3">
                <button
                  onclick="toggleMute('bgm')"
                  id="btn-mute-bgm"
                  class="p-2 bg-white border border-slate-300 rounded-full shadow-sm hover:bg-slate-100 transition active:scale-95 text-slate-600"
                >
                  <svg
                    id="icon-bgm-on"
                    class="w-5 h-5"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"
                    ></path>
                  </svg>
                  <svg
                    id="icon-bgm-off"
                    class="w-5 h-5 hidden text-slate-400"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"
                    />
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M17 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2"
                    />
                  </svg>
                </button>
                <input
                  id="slider-bgm"
                  type="range"
                  min="0"
                  max="100"
                  value="50"
                  oninput="updateVolume('bgm', this.value)"
                  class="w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer accent-blue-500"
                />
              </div>
            </div>

            <div>
              <div class="flex justify-between items-center mb-2">
                <span class="text-xs font-bold text-slate-600">Efek (SFX)</span>
                <span id="sfx-val" class="text-xs font-bold text-purple-500"
                  >80%</span
                >
              </div>
              <div class="flex items-center gap-3">
                <button
                  onclick="toggleMute('sfx')"
                  id="btn-mute-sfx"
                  class="p-2 bg-white border border-slate-300 rounded-full shadow-sm hover:bg-slate-100 transition active:scale-95 text-slate-600"
                >
                  <svg
                    id="icon-sfx-on"
                    class="w-5 h-5"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M15.536 8.464a5 5 0 010 7.072M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"
                    ></path>
                  </svg>
                  <svg
                    id="icon-sfx-off"
                    class="w-5 h-5 hidden text-slate-400"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"
                    />
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M17 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2"
                    />
                  </svg>
                </button>
                <input
                  id="slider-sfx"
                  type="range"
                  min="0"
                  max="100"
                  value="80"
                  oninput="updateVolume('sfx', this.value)"
                  class="w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer accent-purple-500"
                />
              </div>
            </div>
          </div>

          <button
            onclick="goToMainMenu()"
            class="w-full bg-red-100 hover:bg-red-200 text-red-600 font-bold py-3 rounded-xl flex items-center justify-center gap-2"
          >
            Ke Menu Utama
          </button>

          <button
            onclick="restartLevel()"
            class="w-full mt-2 bg-yellow-100 hover:bg-yellow-200 text-yellow-700 font-bold py-3 rounded-xl flex items-center justify-center gap-2"
          >
            <span>ğŸ”„</span> Mulai Ulang Level
          </button>
          <button
            onclick="closeSettingsModal()"
            class="w-full mt-2 bg-slate-800 hover:bg-slate-900 text-white font-bold py-3 rounded-xl"
          >
            Tutup
          </button>
        </div>
      </div>
    </div>

    <div
      id="level-select-modal"
      class="absolute inset-0 bg-black/80 backdrop-blur-md flex items-center justify-center z-[215] hidden opacity-0 transition-opacity duration-300"
    >
      <div
        class="bg-white w-full max-w-md h-[80vh] m-4 rounded-3xl shadow-2xl flex flex-col overflow-hidden"
      >
        <div
          class="p-4 bg-slate-100 border-b flex justify-between items-center"
        >
          <h2 class="text-2xl font-black text-slate-800">PILIH LEVEL</h2>
          <button
            onclick="closeLevelSelect()"
            class="bg-slate-200 p-2 rounded-full hover:bg-slate-300 font-bold"
          >
            âŒ
          </button>
        </div>
        <div
          id="level-grid"
          class="flex-1 overflow-y-auto p-6 grid grid-cols-4 gap-4 content-start"
        ></div>
      </div>
    </div>

    <div
      id="info-modal"
      class="absolute inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-[220] hidden opacity-0 transition-opacity duration-300"
    >
      <div
        class="bg-white p-5 rounded-3xl shadow-2xl modal-box h-[85vh] flex flex-col overflow-hidden"
      >
        <div class="flex justify-between items-center mb-2 border-b pb-2">
          <h2 class="text-xl font-black text-slate-800 tracking-tight">
            PANDUAN & TEMA
          </h2>
          <button
            onclick="closeInfoModal()"
            class="bg-slate-100 p-2 rounded-full hover:bg-slate-200 text-slate-600 font-bold"
          >
            âœ•
          </button>
        </div>

        <div class="flex-1 overflow-y-auto scrollbar-hide space-y-5 pr-1 pb-4">
          <div
            class="bg-gradient-to-br from-slate-50 to-blue-50 p-4 rounded-2xl border border-blue-100 shadow-sm"
          >
            <h3
              class="font-bold text-slate-700 text-center mb-3 text-sm uppercase tracking-wider"
            >
              Pilih Tema (10 Pilihan)
            </h3>
            <div class="grid grid-cols-5 gap-2">
              <button
                onclick="changeTheme('theme-ocean')"
                class="flex flex-col items-center gap-1 group"
              >
                <div
                  class="w-8 h-8 rounded-full bg-sky-400 border-2 border-white shadow-sm group-hover:scale-110 transition"
                ></div>
                <span class="text-[8px] font-bold text-slate-600">Ocean</span>
              </button>
              <button
                onclick="changeTheme('theme-sakura')"
                class="flex flex-col items-center gap-1 group"
              >
                <div
                  class="w-8 h-8 rounded-full bg-pink-300 border-2 border-white shadow-sm group-hover:scale-110 transition"
                ></div>
                <span class="text-[8px] font-bold text-slate-600">Sakura</span>
              </button>
              <button
                onclick="changeTheme('theme-forest')"
                class="flex flex-col items-center gap-1 group"
              >
                <div
                  class="w-8 h-8 rounded-full bg-green-400 border-2 border-white shadow-sm group-hover:scale-110 transition"
                ></div>
                <span class="text-[8px] font-bold text-slate-600">Forest</span>
              </button>
              <button
                onclick="changeTheme('theme-candy')"
                class="flex flex-col items-center gap-1 group"
              >
                <div
                  class="w-8 h-8 rounded-full bg-yellow-200 border-2 border-white shadow-sm group-hover:scale-110 transition"
                ></div>
                <span class="text-[8px] font-bold text-slate-600">Candy</span>
              </button>
              <button
                onclick="changeTheme('theme-sunset')"
                class="flex flex-col items-center gap-1 group"
              >
                <div
                  class="w-8 h-8 rounded-full bg-orange-400 border-2 border-white shadow-sm group-hover:scale-110 transition"
                ></div>
                <span class="text-[8px] font-bold text-slate-600">Sunset</span>
              </button>

              <button
                onclick="changeTheme('theme-cyberpunk')"
                class="flex flex-col items-center gap-1 group"
              >
                <div
                  class="w-8 h-8 rounded-full bg-slate-900 border-2 border-cyan-400 shadow-sm group-hover:scale-110 transition"
                ></div>
                <span class="text-[8px] font-bold text-slate-600">Cyber</span>
              </button>
              <button
                onclick="changeTheme('theme-galaxy')"
                class="flex flex-col items-center gap-1 group"
              >
                <div
                  class="w-8 h-8 rounded-full bg-indigo-900 border-2 border-purple-400 shadow-sm group-hover:scale-110 transition"
                ></div>
                <span class="text-[8px] font-bold text-slate-600">Galaxy</span>
              </button>
              <button
                onclick="changeTheme('theme-royal')"
                class="flex flex-col items-center gap-1 group"
              >
                <div
                  class="w-8 h-8 rounded-full bg-stone-800 border-2 border-yellow-500 shadow-sm group-hover:scale-110 transition"
                ></div>
                <span class="text-[8px] font-bold text-slate-600">Royal</span>
              </button>
              <button
                onclick="changeTheme('theme-retro')"
                class="flex flex-col items-center gap-1 group"
              >
                <div
                  class="w-8 h-8 rounded-full bg-fuchsia-900 border-2 border-pink-500 shadow-sm group-hover:scale-110 transition"
                ></div>
                <span class="text-[8px] font-bold text-slate-600">Retro</span>
              </button>
              <button
                onclick="changeTheme('theme-matrix')"
                class="flex flex-col items-center gap-1 group"
              >
                <div
                  class="w-8 h-8 rounded-full bg-black border-2 border-green-500 shadow-sm group-hover:scale-110 transition"
                ></div>
                <span class="text-[8px] font-bold text-slate-600">Hacker</span>
              </button>
            </div>
          </div>

          <div>
            <h3 class="font-bold text-slate-800 mb-2 flex items-center gap-2">
              <span class="bg-green-100 text-green-600 p-1 rounded-md text-xs"
                >?</span
              >
              Cara Bermain
            </h3>
            <ul
              class="text-sm text-slate-600 space-y-2 list-none bg-slate-50 p-3 rounded-xl"
            >
              <li class="flex gap-2">
                <span>ğŸ‘‰</span>
                <span
                  >Pilih <strong>3 ubin sama</strong> untuk menghapusnya.</span
                >
              </li>
              <li class="flex gap-2">
                <span>ğŸ‘‰</span>
                <span
                  >Baki (Tray) hanya muat <strong>7 ubin</strong>. Jangan sampai
                  penuh!</span
                >
              </li>
              <li class="flex gap-2">
                <span>ğŸ‘‰</span>
                <span>Habiskan semua ubin di papan untuk menang.</span>
              </li>
            </ul>
          </div>

          <div>
            <h3 class="font-bold text-slate-800 mb-2 flex items-center gap-2">
              <span class="bg-purple-100 text-purple-600 p-1 rounded-md text-xs"
                >â˜…</span
              >
              Item Petualangan
            </h3>
            <div class="grid grid-cols-4 gap-2 text-center">
              <div
                class="bg-slate-50 p-2 rounded-lg border text-[10px] font-bold text-slate-500"
              >
                ğŸ—ºï¸<br />Peta Kuno
              </div>
              <div
                class="bg-slate-50 p-2 rounded-lg border text-[10px] font-bold text-slate-500"
              >
                âš”ï¸<br />Pedang
              </div>
              <div
                class="bg-slate-50 p-2 rounded-lg border text-[10px] font-bold text-slate-500"
              >
                ğŸ’<br />Permata
              </div>
              <div
                class="bg-slate-50 p-2 rounded-lg border text-[10px] font-bold text-slate-500"
              >
                ğŸ§­<br />Kompas
              </div>
              <div
                class="bg-slate-50 p-2 rounded-lg border text-[10px] font-bold text-slate-500"
              >
                ğŸ’€<br />Bahaya
              </div>
              <div
                class="bg-slate-50 p-2 rounded-lg border text-[10px] font-bold text-slate-500"
              >
                ğŸ‘‘<br />Harta
              </div>
              <div
                class="bg-slate-50 p-2 rounded-lg border text-[10px] font-bold text-slate-500"
              >
                ğŸ§ª<br />Ramuan
              </div>
              <div
                class="bg-slate-50 p-2 rounded-lg border text-[10px] font-bold text-slate-500"
              >
                ğŸ”‘<br />Kunci
              </div>
            </div>
          </div>
          <div
            class="mt-3 bg-yellow-50 p-3 rounded-xl border border-yellow-200"
          >
            <h3
              class="font-bold text-yellow-800 text-xs uppercase mb-2 flex items-center gap-1"
            >
              <span>ğŸ†</span> Sistem Poin
            </h3>
            <ul class="text-[10px] text-slate-600 space-y-1.5 font-medium">
              <li class="flex justify-between border-b border-yellow-100 pb-1">
                <span>ğŸ§© Cocokkan 3 Ubin</span>
                <span class="font-bold text-blue-600">+100 Poin</span>
              </li>
              <li class="flex justify-between border-b border-yellow-100 pb-1">
                <span>â±ï¸ Bonus Waktu</span>
                <span class="font-bold text-green-600">+5 Poin / detik</span>
              </li>
              <li class="flex justify-between">
                <span>ğŸ’¡ Pakai Bantuan</span>
                <span class="font-bold text-red-500">-500 Poin</span>
              </li>
            </ul>
            <p class="text-[9px] text-slate-400 mt-1 italic text-center">
              *Bonus waktu berlaku jika selesai < 5 menit
            </p>
          </div>
          <div class="mt-4 pt-4 border-t border-slate-200">
            <h3 class="font-bold text-slate-800 text-xs mb-2 text-center">
              Menemukan Masalah?
            </h3>
            <button
              onclick="sendFeedback()"
              class="w-full bg-green-500 hover:bg-green-600 text-white font-bold py-3 rounded-xl shadow-lg flex items-center justify-center gap-2 transition-transform active:scale-95"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="20"
                height="20"
                fill="currentColor"
                viewBox="0 0 16 16"
              >
                <path
                  d="M13.601 2.326A7.854 7.854 0 0 0 7.994 0C3.627 0 .068 3.558.064 7.926c0 1.399.366 2.76 1.057 3.965L0 16l4.204-1.102a7.933 7.933 0 0 0 3.79.965h.004c4.368 0 7.926-3.558 7.93-7.93A7.898 7.898 0 0 0 13.6 2.326zM7.994 14.521a6.573 6.573 0 0 1-3.356-.92l-.24-.144-2.494.654.666-2.433-.156-.251a6.56 6.56 0 0 1-1.007-3.505c0-3.626 2.957-6.584 6.591-6.584a6.56 6.56 0 0 1 4.66 1.931 6.557 6.557 0 0 1 1.928 4.66c-.004 3.639-2.961 6.592-6.592 6.592z"
                />
              </svg>
              Lapor Bug via WhatsApp
            </button>
            <p class="text-[9px] text-slate-400 mt-2 text-center">
              *Silakan lampirkan screenshot (tangkapan layar) di chat WA.
            </p>
          </div>

          <div class="text-center mt-4">
            <p class="text-xs text-slate-400">Versi 1.0 â€¢ Riyan 2025</p>
          </div>
        </div>
      </div>
    </div>

    <div
      id="overlay"
      class="absolute inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-[150] opacity-0 pointer-events-none transition-opacity duration-300"
    >
      <div
        id="overlay-content"
        class="bg-white p-6 rounded-3xl shadow-2xl text-center modal-box transform transition-all duration-300 scale-90"
      ></div>
    </div>

    <div
      id="exit-modal"
      class="absolute inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-[250] hidden opacity-0 transition-opacity duration-300"
    >
      <div
        class="bg-white p-6 rounded-3xl shadow-2xl modal-box max-w-sm text-center transform scale-100 transition-transform"
      >
        <div
          class="w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4 text-3xl"
        >
          ğŸšª
        </div>
        <h2 class="text-xl font-black text-slate-800 mb-2">Keluar Game?</h2>
        <p class="text-slate-600 text-sm mb-6">
          Apakah Anda yakin ingin menutup aplikasi Tile Explorer?
        </p>
        <div class="grid grid-cols-2 gap-3">
          <button
            onclick="closeExitModal()"
            class="py-3 rounded-xl font-bold text-slate-600 bg-slate-100 hover:bg-slate-200 transition"
          >
            Batal
          </button>
          <button
            onclick="confirmExitApp()"
            class="py-3 rounded-xl font-bold text-white bg-red-500 hover:bg-red-600 shadow-lg transition"
          >
            Ya, Keluar
          </button>
        </div>
      </div>
    </div>

    <div
      id="level-confirm-modal"
      class="absolute inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-[250] hidden opacity-0 transition-opacity duration-300"
    >
      <div
        class="bg-white p-6 rounded-3xl shadow-2xl modal-box max-w-sm text-center transform scale-100 transition-transform"
      >
        <div
          class="w-16 h-16 bg-yellow-100 rounded-full flex items-center justify-center mx-auto mb-4 text-3xl"
        >
          âš ï¸
        </div>
        <h2 class="text-xl font-black text-slate-800 mb-2">Pindah Level?</h2>
        <p class="text-slate-600 text-sm mb-6">
          Jika pindah level sekarang,
          <span class="font-bold text-red-500"
            >Skor Saat Ini akan direset ke 0</span
          >. Skor Tertinggi tetap aman.
        </p>
        <div class="grid grid-cols-2 gap-3">
          <button
            onclick="closeLevelConfirmModal()"
            class="py-3 rounded-xl font-bold text-slate-600 bg-slate-100 hover:bg-slate-200 transition"
          >
            Batal
          </button>
          <button
            id="btn-confirm-jump"
            class="py-3 rounded-xl font-bold text-white bg-blue-600 hover:bg-blue-700 shadow-lg transition"
          >
            Lanjut Pindah
          </button>
        </div>
      </div>
    </div>

    <div
      id="level-restriction-modal"
      class="absolute inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-[250] hidden opacity-0 transition-opacity duration-300"
    >
      <div
        class="bg-white p-6 rounded-3xl shadow-2xl modal-box max-w-xs text-center transform scale-100 transition-transform border-4 border-red-100"
      >
        <div
          class="w-16 h-16 bg-red-100 text-red-500 rounded-full flex items-center justify-center mx-auto mb-4 text-3xl"
        >
          ğŸš«
        </div>
        <h2 class="text-lg font-black text-slate-800 mb-2">Akses Dibatasi</h2>
        <p class="text-slate-600 text-xs mb-6 leading-relaxed">
          Anda tidak bisa kembali ke level sebelumnya sebelum
          <span class="font-bold text-red-500">Menelesaikan Semua Level</span>
          (Tamat).
        </p>
        <button
          onclick="closeRestrictionModal()"
          class="w-full py-3 rounded-xl font-bold text-white bg-slate-800 hover:bg-slate-900 shadow-lg transition"
        >
          Mengerti
        </button>
      </div>
    </div>

    <div
      id="new-game-modal"
      class="absolute inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-[250] hidden opacity-0 transition-opacity duration-300"
    >
      <div
        class="bg-white p-6 rounded-3xl shadow-2xl modal-box max-w-xs text-center transform scale-100 transition-transform border-4 border-red-100"
      >
        <div
          class="w-16 h-16 bg-red-100 text-red-500 rounded-full flex items-center justify-center mx-auto mb-4 text-3xl animate-pulse"
        >
          ğŸ”„
        </div>
        <h2 class="text-xl font-black text-slate-800 mb-2">Mulai Ulang?</h2>
        <p class="text-slate-600 text-sm mb-6 leading-relaxed">
          Semua progress level dan skor saat ini akan
          <span class="font-bold text-red-500">DIHAPUS</span> dan kembali ke
          Level 1.
        </p>
        <div class="grid grid-cols-2 gap-3">
          <button
            onclick="closeNewGameModal()"
            class="py-3 rounded-xl font-bold text-slate-600 bg-slate-100 hover:bg-slate-200 transition"
          >
            Batal
          </button>
          <button
            onclick="executeNewGame()"
            class="py-3 rounded-xl font-bold text-white bg-red-500 hover:bg-red-600 shadow-lg transition"
          >
            Ya, Reset
          </button>
        </div>
      </div>
    </div>

    <div
      id="no-score-modal"
      class="absolute inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-[270] hidden opacity-0 transition-opacity duration-300"
    >
      <div
        class="bg-white p-6 rounded-3xl shadow-2xl modal-box max-w-xs text-center transform scale-100 transition-transform border-4 border-yellow-100"
      >
        <div
          class="w-16 h-16 bg-yellow-100 text-yellow-600 rounded-full flex items-center justify-center mx-auto mb-4 text-3xl"
        >
          ğŸª™
        </div>
        <h2 class="text-xl font-black text-slate-800 mb-2">Poin Kurang!</h2>
        <p class="text-slate-600 text-sm mb-6 leading-relaxed">
          Anda membutuhkan
          <span class="font-bold text-slate-800">500 Poin</span> untuk
          menggunakan bantuan ini. Kumpulkan skor lebih banyak!
        </p>
        <button
          onclick="closeNoScoreModal()"
          class="w-full py-3 rounded-xl font-bold text-white bg-yellow-500 hover:bg-yellow-600 shadow-lg transition"
        >
          Oke, Mengerti
        </button>
      </div>
    </div>

    <div
      id="no-hint-modal"
      class="absolute inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-[270] hidden opacity-0 transition-opacity duration-300"
    >
      <div
        class="bg-white p-6 rounded-3xl shadow-2xl modal-box max-w-xs text-center transform scale-100 transition-transform border-4 border-slate-200"
      >
        <div
          class="w-16 h-16 bg-slate-100 text-slate-400 rounded-full flex items-center justify-center mx-auto mb-4 text-3xl grayscale"
        >
          ğŸ’¡
        </div>
        <h2 class="text-xl font-black text-slate-800 mb-2">Bantuan Habis!</h2>
        <p class="text-slate-600 text-sm mb-6 leading-relaxed">
          Jatah bantuan Anda untuk level ini sudah kosong (0).<br />
          <span class="text-xs text-slate-400 mt-1 block"
            >Bantuan akan diisi ulang di level berikutnya.</span
          >
        </p>
        <button
          onclick="closeNoHintModal()"
          class="w-full py-3 rounded-xl font-bold text-white bg-slate-700 hover:bg-slate-800 shadow-lg transition"
        >
          Oke, Semangat!
        </button>
      </div>
    </div>

    <script src="script.js"></script>
    <script>
      // Register Service Worker untuk PWA
      if ("serviceWorker" in navigator) {
        window.addEventListener("load", () => {
          navigator.serviceWorker
            .register("./sw.js")
            .then((reg) => console.log("Service Worker registered", reg))
            .catch((err) => console.log("Service Worker failed", err));
        });
      }
    </script>
  </body>
</html>
